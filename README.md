# Liza Party Bot

Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–æ–º –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã (–∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π)
- ‚úÖ –®–∞—Ä–∏–Ω–≥ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫–∏
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ "–º–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã" –∏ "–ø–ª–µ–π–ª–∏—Å—Ç—ã, –∫—É–¥–∞ —è –¥–æ–±–∞–≤–ª—è—é"
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º (—Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤, –∞–ª—å–±–æ–º–æ–≤ –∏ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–∫–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Ç–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <your-repo-url>
cd Liza_patry_bot
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3 -m venv venv
source venv/bin/activate  # –ù–∞ Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # –ù–∞ Windows
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env`:

```bash
cp .env.example .env
```

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

- `TELEGRAM_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather))
- `YANDEX_TOKEN` - —Ç–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏ (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: https://yandex-music.readthedocs.io/en/main/token.html)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ë–î —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DB_TYPE`:
- `sqlite` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `postgresql` - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–î–ª—è SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
- `DB_FILE` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: bot.db)

**–î–ª—è PostgreSQL:**
- `DB_HOST` - —Ö–æ—Å—Ç PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: localhost)
- `DB_PORT` - –ø–æ—Ä—Ç PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5432)
- `DB_NAME` –∏–ª–∏ `POSTGRES_DB` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: yandex_music_bot)
- `DB_USER` –∏–ª–∏ `POSTGRES_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: postgres)
- `DB_PASSWORD` –∏–ª–∏ `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å PostgreSQL (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

**–î–ª—è Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- `POSTGRES_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: postgres)
- `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: postgres) ‚ö†Ô∏è **–ò–∑–º–µ–Ω–∏—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!**
- `POSTGRES_DB` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: yandex_music_bot)
- `PGADMIN_DEFAULT_EMAIL` - email –¥–ª—è –≤—Ö–æ–¥–∞ –≤ pgAdmin (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin@admin.com)
- `PGADMIN_DEFAULT_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ pgAdmin (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin) ‚ö†Ô∏è **–ò–∑–º–µ–Ω–∏—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!**

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ü–ª–µ–π–ª–∏—Å—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/create_playlist`. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `PLAYLIST_OWNER_ID`, `PLAYLIST_ID`, `PLAYLIST_KIND` –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):**

- **macOS:** –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Docker Desktop for Mac](https://www.docker.com/products/docker-desktop)
- **Linux:** 
  ```bash
  # Ubuntu/Debian
  sudo apt update
  sudo apt install docker.io docker-compose
  sudo systemctl start docker
  sudo systemctl enable docker
  ```

**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω.

**–ù–∞ macOS:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Docker Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ (–∏–∫–æ–Ω–∫–∞ Docker –≤ —Å—Ç—Ä–æ–∫–µ –º–µ–Ω—é –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω–∞)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Docker:**
```bash
docker ps
# –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫, Docker —Ä–∞–±–æ—Ç–∞–µ—Ç
# –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "Cannot connect to the Docker daemon", –∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop
```

**–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –∏ pgAdmin
# –ù–∞ macOS/Linux —Å Docker Desktop –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
docker compose up -d postgres pgadmin

# –ò–ª–∏ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è docker-compose:
docker-compose up -d postgres pgadmin
```

PostgreSQL –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `localhost:5432`, pgAdmin –Ω–∞ `http://localhost:5050` (–ª–æ–≥–∏–Ω: `admin@admin.com`, –ø–∞—Ä–æ–ª—å: `admin`).

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ pgAdmin:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5050`

2. –í–æ–π–¥–∏—Ç–µ –≤ pgAdmin:
   - **Email:** `admin@admin.com` (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `PGADMIN_DEFAULT_EMAIL` –≤ `.env`)
   - **Password:** `admin` (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `PGADMIN_DEFAULT_PASSWORD` –≤ `.env`)

3. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä PostgreSQL:
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ **"Servers"** –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Register" ‚Üí "Server..."**

4. –ù–∞ –≤–∫–ª–∞–¥–∫–µ **"General"**:
   - **Name:** `Yandex Music Bot DB` (–∏–ª–∏ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –∏–º—è)

5. –ù–∞ –≤–∫–ª–∞–¥–∫–µ **"Connection"**:
   - **Host name/address:** `postgres` (–∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ docker-compose.yml)
   - **Port:** `5432`
   - **Maintenance database:** `yandex_music_bot` (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `POSTGRES_DB` –≤ `.env`)
   - **Username:** `postgres` (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `POSTGRES_USER` –≤ `.env`)
   - **Password:** `postgres` (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `POSTGRES_PASSWORD` –≤ `.env`)
   - ‚úÖ –û—Ç–º–µ—Ç—å—Ç–µ **"Save password"** –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

6. –ù–∞–∂–º–∏—Ç–µ **"Save"**

7. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã: —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ **Servers ‚Üí Yandex Music Bot DB ‚Üí Databases ‚Üí yandex_music_bot ‚Üí Schemas ‚Üí public ‚Üí Tables**
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ: –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É ‚Üí **"View/Edit Data" ‚Üí "All Rows"**
   - –í—ã–ø–æ–ª–Ω—è—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã: –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö ‚Üí **"Query Tool"**

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram
- `yandex_accounts` - –∞–∫–∫–∞—É–Ω—Ç—ã –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏
- `playlists` - –ø–ª–µ–π–ª–∏—Å—Ç—ã
- `playlist_access` - –¥–æ—Å—Ç—É–ø—ã –∫ –ø–ª–µ–π–ª–∏—Å—Ç–∞–º
- `actions` - –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ `'ServerManager' object has no attribute 'user_info'`:**

–ï—Å–ª–∏ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É PostgreSQL –≤ pgAdmin –≤—ã –≤–∏–¥–∏—Ç–µ —ç—Ç—É –æ—à–∏–±–∫—É, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –≤–µ—Ä—Å–∏—è pgAdmin. –ü—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ `docker-compose.yml` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pgAdmin –≤–µ—Ä—Å–∏–∏ 8, —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å PostgreSQL 15).

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤—Å—ë –µ—â—ë –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
```bash
docker compose down
docker compose rm -f pgadmin
```

2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:
```bash
docker compose up -d postgres pgadmin
```

3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ pgAdmin –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:**
```bash
docker compose down
# –∏–ª–∏
docker-compose down
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
```bash
docker compose logs -f postgres
# –∏–ª–∏
docker-compose logs -f postgres
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
# Ubuntu/Debian
sudo apt install postgresql postgresql-contrib

# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres psql
CREATE DATABASE yandex_music_bot;
CREATE USER postgres WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE yandex_music_bot TO postgres;
\q
```

–û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env` —Ñ–∞–π–ª–µ.

### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
python bot.py
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (bot + PostgreSQL + pgAdmin)
docker compose up -d
# –∏–ª–∏ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è:
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f bot
# –∏–ª–∏
docker-compose logs -f bot
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ (Linux)

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3 –∏ pip (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã):

```bash
sudo apt update
sudo apt install python3 python3-pip python3-venv git
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
sudo apt install docker.io docker-compose-plugin

# –ó–∞–ø—É—Å–∫ –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Docker
sudo systemctl start docker
sudo systemctl enable docker

# –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker (—á—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sudo)
sudo usermod -aG docker $USER
# –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É
```

**–í–∞–∂–Ω–æ:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker compose` (V2) –≤–º–µ—Å—Ç–æ `docker-compose` (V1). –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è `docker-compose` –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è `docker-compose`, —É–¥–∞–ª–∏—Ç–µ –µ—ë:

```bash
# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ docker-compose
sudo apt remove docker-compose
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `docker compose` (–±–µ–∑ –¥–µ—Ñ–∏—Å–∞) –≤–º–µ—Å—Ç–æ `docker-compose`.

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
cd ~
git clone <your-repo-url> liza_bot
cd liza_bot
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –≤–∞—à–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏:

```bash
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å –≤–∞—à–∏–º–∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ (–∫–∞–∫ –≤ `.env.example`, –Ω–æ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏).

4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–ø—É—Å–∫:

```bash
source venv/bin/activate
python bot.py
```

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞ (Ctrl+C).

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker Compose –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞ PostgreSQL –∏ pgAdmin –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω):

```bash
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è" –≤—ã—à–µ).

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL –∏ pgAdmin:

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ docker compose (V2) –≤–º–µ—Å—Ç–æ docker-compose
docker compose up -d postgres pgadmin
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker compose ps
```

4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:

```bash
docker compose logs -f postgres
```

5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
docker compose down
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É `Not supported URL scheme http+docker`, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è `docker-compose`. –£–¥–∞–ª–∏—Ç–µ –µ—ë –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker compose` (V2):

```bash
sudo apt remove docker-compose
docker compose up -d postgres pgadmin
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Ä—Ç–∞–º

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–µ–Ω firewall (ufw), –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ß—Ç–æ–±—ã pgAdmin –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω —Å–Ω–∞—Ä—É–∂–∏, –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 5050.

**‚ö†Ô∏è –í–ê–ñ–ù–û: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

- **–ù–ï –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –ø–æ—Ä—Ç 5432 (PostgreSQL) –Ω–∞—Ä—É–∂—É** ‚Äî —ç—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ! –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ VPN.
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 5050 (pgAdmin) —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∞–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.
- –ï—Å–ª–∏ pgAdmin –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH —Ç—É–Ω–Ω–µ–ª—å (—Å–º. –Ω–∏–∂–µ).

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç pgAdmin (5050) –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å firewall
sudo ufw status

# –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 5050 –¥–ª—è pgAdmin
sudo ufw allow 5050/tcp

# –ï—Å–ª–∏ firewall –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω, –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ
sudo ufw enable
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ pgAdmin –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://–≤–∞—à_—Å–µ—Ä–≤–µ—Ä_ip:5050`

**‚ö†Ô∏è –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `.env` —Ñ–∞–π–ª–µ!**

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ pgAdmin –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://–≤–∞—à_—Å–µ—Ä–≤–µ—Ä_ip:5050` (–∏–ª–∏ `http://localhost:5050` –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ SSH —Ç—É–Ω–Ω–µ–ª—å)

2. –í–æ–π–¥–∏—Ç–µ –≤ pgAdmin:
   - **Email:** –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `PGADMIN_DEFAULT_EMAIL` –≤ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admin@admin.com`)
   - **Password:** –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `PGADMIN_DEFAULT_PASSWORD` –≤ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admin`)

3. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä PostgreSQL:
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ **"Servers"** –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Register" ‚Üí "Server..."**

4. –ù–∞ –≤–∫–ª–∞–¥–∫–µ **"General"**:
   - **Name:** `Yandex Music Bot DB` (–∏–ª–∏ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –∏–º—è)

5. –ù–∞ –≤–∫–ª–∞–¥–∫–µ **"Connection"**:
   - **Host name/address:** `postgres` (–∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ docker-compose.yml)
   - **Port:** `5432`
   - **Maintenance database:** –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `POSTGRES_DB` –≤ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `yandex_music_bot`)
   - **Username:** –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `POSTGRES_USER` –≤ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `postgres`)
   - **Password:** –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `POSTGRES_PASSWORD` –≤ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `postgres`)
   - ‚úÖ –û—Ç–º–µ—Ç—å—Ç–µ **"Save password"** –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

6. –ù–∞–∂–º–∏—Ç–µ **"Save"**

7. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞–Ω–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ pgAdmin")

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH —Ç—É–Ω–Ω–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

–í–º–µ—Å—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞ –Ω–∞—Ä—É–∂—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH —Ç—É–Ω–Ω–µ–ª—å —Å –≤–∞—à–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:

```bash
# –ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
ssh -L 5050:localhost:5050 user@your_server_ip
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ pgAdmin –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5050`, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ SSH.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ PostgreSQL:** –ü–æ—Ä—Ç 5432 (PostgreSQL) –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ firewall ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH —Ç—É–Ω–Ω–µ–ª—å:

```bash
# –ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
ssh -L 5432:localhost:5432 user@your_server_ip
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞:

```bash
sudo nano /etc/systemd/system/liza-bot.service
```

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `/home/your_user` –Ω–∞ –≤–∞—à –ø—É—Ç—å):

```ini
[Unit]
Description=Liza Party Telegram Bot
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/home/your_user/liza_bot
Environment="PATH=/home/your_user/liza_bot/venv/bin"
ExecStart=/home/your_user/liza_bot/venv/bin/python /home/your_user/liza_bot/bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ó–∞–º–µ–Ω–∏—Ç–µ `your_user` –Ω–∞ –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl daemon-reload
sudo systemctl enable liza-bot.service
sudo systemctl start liza-bot.service
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
sudo systemctl status liza-bot.service
```

–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:

```bash
sudo journalctl -u liza-bot.service -f
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd ~/liza_bot
git pull
source venv/bin/activate
pip install -r requirements.txt  # –µ—Å–ª–∏ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo systemctl restart liza-bot.service
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ym-playlist-bot/
‚îú‚îÄ‚îÄ bot.py                    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ database/                  # –ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ base.py               # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å DatabaseInterface
‚îÇ   ‚îú‚îÄ‚îÄ sqlite_db.py          # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è SQLite
‚îÇ   ‚îî‚îÄ‚îÄ postgresql_db.py      # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è PostgreSQL
‚îú‚îÄ‚îÄ yandex_client_manager.py   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏
‚îú‚îÄ‚îÄ bot.db                     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ docker-compose.yml         # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (PostgreSQL + pgAdmin + Bot)
‚îú‚îÄ‚îÄ Dockerfile                 # Docker –æ–±—Ä–∞–∑ –¥–ª—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .env                       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
‚îú‚îÄ‚îÄ .env.example               # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                 # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Git
‚îú‚îÄ‚îÄ docs/                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md                  # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π! –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã.

–§–∞–π–ª `.env` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`, –Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –Ω–µ –ø–æ–ø–∞–ª –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–ª—É—á–∞–π–Ω–æ.

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` - –ø–æ–º–æ—â—å –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –ø–ª–µ–π–ª–∏—Å—Ç)
- `/create_playlist [–Ω–∞–∑–≤–∞–Ω–∏–µ]` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)
- `/my_playlists` - –ø–æ–∫–∞–∑–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–æ–∑–¥–∞–ª–∏
- `/shared_playlists` - –ø–æ–∫–∞–∑–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã, –∫—É–¥–∞ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ
- `/list [–Ω–æ–º–µ—Ä]` - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ
- `/playlist_info [–Ω–æ–º–µ—Ä]` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–µ–π–ª–∏—Å—Ç–µ (—Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫—É)
- `/delete_track [–Ω–æ–º–µ—Ä]` - —É–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
- `/set_token [—Ç–æ–∫–µ–Ω]` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π —Ç–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)
- `/edit_name [–Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ]` - –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º, —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è)
- `/delete_playlist` - —É–¥–∞–ª–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç –∏–∑ –ë–î (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è)

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
–ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏:
- üìÅ –ú–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã
- üìÇ –û–±—â–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
- ‚ûï –°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç
- üìã –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤
- ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏
–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ (FSM) –¥–ª—è:
- –°–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–æ–∫–µ–Ω–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —Ç–æ–∫–µ–Ω)
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞
- –£–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–∞

–í –∫–∞–∂–¥–æ–º –¥–∏–∞–ª–æ–≥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚ùå –û—Ç–º–µ–Ω–∞" –¥–ª—è –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏.

### Inline-–∫–Ω–æ–ø–∫–∏
–í `/playlist_info` –¥–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π:
- ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è)
- üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è)
- üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫ (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤
–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç—Ä–µ–∫, –∞–ª—å–±–æ–º –∏–ª–∏ –ø–ª–µ–π–ª–∏—Å—Ç, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ –∞–∫—Ç–∏–≤–Ω—ã–π –ø–ª–µ–π–ª–∏—Å—Ç.

### –®–∞—Ä–∏–Ω–≥ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤–∞–º —Å—Å—ã–ª–∫—É –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—ë –¥—Ä—É–∑—å—è–º, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç—Ä–µ–∫–∏ –≤ –≤–∞—à –ø–ª–µ–π–ª–∏—Å—Ç.

–ü–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∫–æ–º–∞–Ω–¥–∞–º —Å–º. –≤ [docs/commands.md](docs/commands.md)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç –∏ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç
2. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç.

