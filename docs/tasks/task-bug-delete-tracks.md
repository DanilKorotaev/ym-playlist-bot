# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–æ–≤

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö–†–ò–¢–ò–ß–ù–û  
**–ö–∞—Ç–µ–≥–æ—Ä–∏—è**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞

API –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–∫–æ–≤, –Ω–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç—Ä–µ–∫–æ–≤.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç—Ä–µ–∫–æ–≤ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞ —á–µ—Ä–µ–∑ API –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–ª–µ–π–ª–∏—Å—Ç–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–µ.

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞**: API —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-yandex-music-without-invocation-info: 1`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `_request.post()`
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤**: API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `to` –∫–∞–∫ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å (exclusive), –∞ –Ω–µ –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π (inclusive). –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º 7 –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `from:7, to:8`, –∞ –Ω–µ `from:7, to:7`
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞**: –ù–µ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ –æ—Ç–≤–µ—Ç–∞, —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

## –ó–∞–¥–∞—á–∏

- [x] –ò–∑—É—á–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ API –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç—Ä–µ–∫–æ–≤
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç API –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–∫–æ–≤ –¥–æ –∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
- [x] –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ `YandexService.delete_track_from_playlist`

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

–ò–∑—É—á–µ–Ω–æ:
- API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/users/{owner_id}/playlists/{playlist_kind}/change-relative` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `diff` (JSON –º–∞—Å—Å–∏–≤ –æ–ø–µ—Ä–∞—Ü–∏–π) –∏ `revision`
- API –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç, –Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–∫–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- API —Ç—Ä–µ–±—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-yandex-music-without-invocation-info: 1`
- API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `to` –∫–∞–∫ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å (exclusive end), –∞ –Ω–µ –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π (inclusive)
  - –ü—Ä–∏–º–µ—Ä: –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º 7 (–ø–æ—Å–ª–µ–¥–Ω–∏–π –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ –∏–∑ 8 —Ç—Ä–µ–∫–æ–≤) –Ω—É–∂–Ω–æ `from:7, to:8`
  - –†–∞–Ω–µ–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å `from:7, to:7`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ

### –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `YandexService.delete_track_from_playlist`:

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `requests.post` –Ω–∞–ø—Ä—è–º—É—é –≤–º–µ—Å—Ç–æ `_request.post()` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-yandex-music-without-invocation-info: 1`
3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤: `to` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1 (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–∑ inclusive –≤ exclusive)
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞ (200)
5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–∫–æ–≤ –¥–æ —É–¥–∞–ª–µ–Ω–∏—è
6. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü –ø–ª–µ–π–ª–∏—Å—Ç–∞)
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–∫–æ–≤ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
8. ‚úÖ –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
9. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–∏ (URL, diff, –∑–∞–≥–æ–ª–æ–≤–∫–∏)
10. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ revision —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏

### –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ requests.post**: –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `requests.post` –Ω–∞–ø—Ä—è–º—É—é (–∫–∞–∫ –≤ `set_playlist_cover`), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å-–∫–æ–¥
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞**: –ö–æ–ø–∏—Ä—É—é—Ç—Å—è –∏–∑ `self.client._request.headers` –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π `x-yandex-music-without-invocation-info: 1`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤**: 
  - –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (inclusive): `from_idx` –∏ `to_idx` (0-based)
  - –ü—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ `to` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π (exclusive): `api_to_idx = to_idx + 1`
  - –ü—Ä–∏–º–µ—Ä: –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º 7 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `from:7, to:8`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `response.status_code == 200`, –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤**: –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏–Ω–¥–µ–∫—Å—ã –Ω–µ –≤—ã—Ö–æ–¥—è—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø–ª–µ–π–ª–∏—Å—Ç–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (from_idx <= to_idx)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ —É–¥–∞–ª–µ–Ω–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–∫–æ–≤ –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–∫–æ–≤
- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏**: –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö revision –∏–ª–∏ –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ (–¥–æ `max_retries` —Ä–∞–∑)
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –õ–æ–≥–∏—Ä—É—é—Ç—Å—è URL, diff (–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π), –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –≤—Å–µ —ç—Ç–∞–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `services/yandex_service.py` - –º–µ—Ç–æ–¥ `delete_track_from_playlist`
- `handlers/callbacks.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–æ–≤

