# Команды бота

## Основные команды

### `/start`
**Описание**: Приветствие и помощь. Показывает список доступных команд.

**Использование**: 
- `/start` — показать помощь
- `/start <токен>` — получить доступ к плейлисту по токену шаринга

**Пример**: `/start` или `/start abc123xyz`

---

### `/create_playlist <название>`
**Описание**: Создать новый плейлист в Яндекс.Музыке.

**Параметры**:
- `<название>` — название плейлиста (обязательно, максимум 100 символов)

**Возвращает**: 
- Ссылку для шаринга плейлиста
- Устанавливает созданный плейлист как активный

**Пример**: `/create_playlist Моя музыка`

---

### `/my_playlists`
**Описание**: Показать список плейлистов, созданных пользователем.

**Возвращает**: Список плейлистов с inline-кнопками для выбора.

**Пример**: `/my_playlists`

---

### `/shared_playlists`
**Описание**: Показать список плейлистов, куда пользователь добавляет треки (но не является создателем).

**Возвращает**: Список плейлистов с inline-кнопками для выбора.

**Пример**: `/shared_playlists`

---

### `/list [номер плейлиста]`
**Описание**: Показать список треков в плейлисте.

**Параметры**:
- `[номер плейлиста]` — опционально, ID плейлиста. Если не указан, используется активный плейлист.

**Возвращает**: Пронумерованный список треков с названиями и исполнителями.

**Пример**: `/list` или `/list 5`

---

### `/playlist_info [номер плейлиста]`
**Описание**: Показать информацию о плейлисте.

**Параметры**:
- `[номер плейлиста]` — опционально, ID плейлиста. Если не указан, используется активный плейлист.

**Возвращает**: 
- Название плейлиста
- ID плейлиста
- Статус пользователя (создатель/участник)
- Ссылку для шаринга (если пользователь — создатель)
- Доступные действия

**Пример**: `/playlist_info` или `/playlist_info 3`

---

### `/set_token <токен>`
**Описание**: Установить свой токен Яндекс.Музыки для создания плейлистов в своем аккаунте.

**Параметры**:
- `<токен>` — токен Яндекс.Музыки (обязательно)

**⚠️ ВНИМАНИЕ**: Передача токена боту происходит на ваш страх и риск!

**Как получить токен**: https://yandex-music.readthedocs.io/en/main/token.html

**Пример**: `/set_token AgAAAAA...`

---

### `/edit_name <новое название>`
**Описание**: Изменить название плейлиста (только для создателя).

**Параметры**:
- `<новое название>` — новое название плейлиста (обязательно, максимум 100 символов)

**Требования**: Пользователь должен быть создателем активного плейлиста.

**Пример**: `/edit_name Новая музыка`

---

### `/delete_playlist`
**Описание**: Удалить плейлист из базы данных бота (только для создателя).

**⚠️ ВНИМАНИЕ**: Плейлист удаляется только из базы данных бота. В Яндекс.Музыке плейлист остается, но бот теряет связь с ним.

**Требования**: Пользователь должен быть создателем активного плейлиста.

**Пример**: `/delete_playlist`

---

### `/queen_liza <номер>`
**Описание**: Удалить трек из активного плейлиста по номеру.

**Параметры**:
- `<номер>` — номер трека в списке (обязательно, начиная с 1)

**Требования**: Пользователь должен иметь права на редактирование плейлиста.

**Пример**: `/queen_liza 5`

---

## Работа со ссылками

Бот автоматически распознает ссылки на треки, альбомы и плейлисты Яндекс.Музыки и добавляет их в активный плейлист.

### Поддерживаемые форматы

**Треки**:
- `https://music.yandex.ru/track/123456`
- `https://music.yandex.ru/track/abc123-def456`
- Просто номер трека: `123456`

**Альбомы**:
- `https://music.yandex.ru/album/123456`
- `https://music.yandex.ru/album/abc123-def456`

**Плейлисты**:
- `https://music.yandex.ru/users/username/playlists/123`
- `https://music.yandex.ru/playlists/123`

**Токены шаринга**:
- `https://t.me/botname?start=TOKEN`
- Просто токен: `TOKEN`

---

## Inline-кнопки

При просмотре списка плейлистов (`/my_playlists`, `/shared_playlists`) бот показывает inline-кнопки для быстрого выбора плейлиста. Нажатие на кнопку устанавливает выбранный плейлист как активный.

---

## Активный плейлист

Бот автоматически определяет активный плейлист для каждого пользователя:
1. Если пользователь выбрал плейлист через inline-кнопку — используется он
2. Если пользователь создал плейлист — он становится активным
3. Если пользователь получил доступ к плейлисту через ссылку — он становится активным
4. Иначе используется первый доступный плейлист пользователя

Активный плейлист используется для:
- Добавления треков (при отправке ссылок)
- Команды `/list` (если не указан номер)
- Команды `/playlist_info` (если не указан номер)
- Команды `/queen_liza`

---

## Права доступа

### Создатель плейлиста
- ✅ Полный доступ (добавление, редактирование, удаление треков)
- ✅ Изменение названия плейлиста
- ✅ Удаление плейлиста из базы данных
- ✅ Просмотр ссылки для шаринга

### Участник плейлиста
- ✅ Добавление треков
- ✅ Просмотр списка треков
- ✅ Просмотр информации о плейлисте
- ❌ Редактирование названия
- ❌ Удаление плейлиста
- ❌ Удаление треков (требуются права на редактирование)

---

## Примеры использования

### Создание и шаринг плейлиста
```
1. /create_playlist Вечеринка
   → Бот создает плейлист и отправляет ссылку для шаринга

2. Отправка ссылки друзьям
   → Друзья переходят по ссылке и получают доступ

3. Друзья отправляют ссылки на треки
   → Треки автоматически добавляются в плейлист
```

### Использование своего токена
```
1. Получить токен на https://yandex-music.readthedocs.io/en/main/token.html
2. /set_token <ваш_токен>
3. /create_playlist Моя музыка
   → Плейлист создается в вашем аккаунте Яндекс.Музыки
```

### Управление несколькими плейлистами
```
1. /my_playlists
   → Выбрать плейлист через inline-кнопку
2. Отправить ссылку на трек
   → Трек добавляется в выбранный плейлист
3. /list
   → Просмотр треков в активном плейлисте
```

